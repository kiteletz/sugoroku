function createBoard(e){var t=window.CONFIG.goalIndex;let d=window.board;d.innerHTML="",setupRandomEvents(e);for(let e=0;e<=t;e++){var n=createCell(e);d.appendChild(n),window.cells[e]=n}window.players.forEach((e,t)=>{var n;e.element||(id=e.id,(n=document.createElement("div")).classList.add("player"),n.style.backgroundColor=e.color,d.appendChild(n),e.element=n)})}function createCell(e){var t=window.CONFIG.goalIndex,n=document.createElement("div"),d=(n.classList.add("cell"),document.createElement("div")),a=(d.classList.add("top-row"),document.createElement("div"));a.textContent=0===e?"スタート":e===t?"ゴール":"",d.appendChild(a);let o;return(o=window.events&&window.events[e]?window.events[e]:o)&&o.symbol&&((a=document.createElement("div")).classList.add("symbol"),a.textContent=o.symbol,d.appendChild(a)),n.appendChild(d),0===e&&n.classList.add("start"),e===t&&n.classList.add("goal"),o&&(0<o.value||0<o.repeatSign?n.classList.add("event-forward"):o.value<0||o.repeatSign<0||void 0!==o.jumpTo?n.classList.add("event-back"):void 0!==o.diceTable&&n.classList.add("event-dice"),o.direction)&&n.classList.add("dir-"+o.direction),o&&o.text&&((a=document.createElement("small")).classList.add("event-text"),a.textContent=o.text,n.appendChild(a)),n}function setupRandomEvents(e){window.events={};var t=filterEvent(e)||[];if(0!==t.length){var n=Math.min(t.length,window.CONFIG.eventMax),d=[];for(let e=1;e<window.CONFIG.goalIndex;e++)d.push(e);if(window.CONFIG.random){for(let e=d.length-1;0<e;e--){var a=Math.floor(Math.random()*(e+1));[d[e],d[a]]=[d[a],d[e]]}for(let e=t.length-1;0<e;e--){var o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}}for(let e=0;e<n;e++){var l=d[e];window.events[l]={...t[e]}}}}function filterEvent(t){return window.eventList.filter(e=>e.tag?.some(e=>t.includes(e)))}window.createBoard=createBoard,window.setupRandomEvents=setupRandomEvents;
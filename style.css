#board {
    display: grid;
	grid-template-columns: repeat(var(--cols, 6), 1fr); /* CSS変数 */
    gap: 20px; /* マス同士の間隔 */
    width: 100%; /* 画面幅に合わせる */
    max-width: 500px; /* 現在の幅を維持（500px上限） */
    margin: 20px auto;
    padding: 20px;
    background-color: rgba(0, 0, 30, 0.7); /* そのまま */
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(100, 150, 255, 0.8); /* そのまま */
    justify-items: center; /* マスを横中央揃え */
    align-content: center; /* 縦中央揃え（flexのalign-items相当） */
    position: relative;
}

.cell {
	width: 60px;
	height: 60px;
	border: 2px solid #333;
	margin: 0px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 14px;
	position: relative;
	flex-direction: column;    /* 全体は縦並び（番号+symbolの上にtext） */
	background: linear-gradient(135deg, #001133 0%, #002255 100%);  /* 深い青グラデ */
	border: 3px solid #00aaff;      /* 明るい青のボーダー（LCARS風） */
	border-radius: 15px;            /* 丸み強め */
	box-shadow: 
		0 0 15px rgba(0, 170, 255, 0.6),   /* 青い外光 */
		inset 0 0 10px rgba(0, 255, 255, 0.2); /* 内側光 */
}

/* マスの右側に赤い印を追加（すべてのマスに） */
.cell::after {
	content: '▶';             
	font-size: 20px;
	color: #ff0000;               /* 鮮やかな赤 */
	text-shadow: 2px 2px 4px #880000;
	position: absolute;
	left: 100%;                   /* マスの右側 85% */ 
	top: 50%;
	transform: translateY(-50%); 
	margin-left: 0px;            /* 間隔調整 * 10px/
	pointer-events: none;         /* クリック干渉なし */
}
/* down の場合：下側に配置 + 90度回転 */
.cell.dir-down::after {
	left: 50%;
	top: 75%; /* マスの下側 */
	transform: translateX(-50%) rotate(90deg);  /* 90度回転で下向きに */
	margin-top: 10px;   /* 間隔調整 */
	margin-left: 0;
}
/* 行の最後のマスには矢印なし */
.cell.goal::after {
	display: none;
}

.start { background-color: #90ee90; }
.goal { background-color: #ff6347; }
.event-forward { background-color: #add8e6; }
.event-back { background-color: #ffb6c1; }
.event-jump { background-color: #ffd700; }

/* スマホ対応（画面幅が狭いとき） */
@media (max-width: 768px) {
	body {
		position: fixed;
		top: 0;
		bottom: 0;
		left: 0;
		right: 0;
		
		margin: 4px;
	}
	#board {
		width: 90vw;              /* 画面全体を基準に幅を定義 */
		max-width: 90vw;          /* 上限 */
		box-sizing: border-box;    /* padding/borderを幅に含める */
		overflow-x: hidden;        /* 横はみ出しを強制的に隠す（万が一マスたちのほうが大きい場合はみ出しは隠される） */
		overflow-y: hidden; /* 矢印の分がはみ出しに寄与する場合がある。その対策 */
		margin: 5px;  /*  */		
		gap: 10px 10px; /* マス同士の隙間。縦と横*/
		padding: 10px;
    }
	.cell {
		box-sizing: border-box; /* padding/borderを幅に含める */
		width: 	calc((90vw - (20px + (var(--cols, 6) - 1)*10px)) / var(--cols, 6));  /* 90px = 2*20px + (6 - 1)*10px */
		height: calc((90vw - (20px + (var(--cols, 6) - 1)*10px)) / var(--cols, 6));
		font-size: calc(6px + (100vw - 320px) / 40);  /* 画面幅に応じてフォント調整 */
		border-radius: 10px;
	}
	/* 共通の矢印スタイル（スマホ用調整） */
	.cell::after {
		content: '▶';
		font-size: 14px;          /* スマホ時は少し小さく（見やすい範囲） */
		color: #ff0000;
		text-shadow: 1px 1px 3px #880000;
		position: absolute;
		pointer-events: none;
		display: flex;
		align-items: center;
		justify-content: center;
	}
	/* right（右側） */
	.cell::after {
		right: -15px;             /* マスの右外側に固定距離 -12px */
		top: 50%;
		transform: translateY(-50%);
	}
	
	/* down（下側） */
	.cell.dir-down::after {
		bottom: -15px;            /* マスの下外側に固定距離 */
		left: 50%;
		transform: translateX(-50%) rotate(90deg);
	}
}

.player {
	width: 44px;                    /* 内容領域の幅 */
	height: 44px;	
	border-radius: 50%;
	border: 3px solid #fff;         /* 白フチ */
	position: absolute;
	transition: all 0.4s cubic-bezier(0.3, 0.8, 0.6, 1);
	z-index: 100;
	pointer-events: none;
	box-shadow: 0 6px 12px rgba(0,0,0,0.4);
	box-sizing: border-box;         /* ← 重要！ボーダーを幅に含める */
}
/* スマホ対応（画面幅が狭いとき） */
@media (max-width: 768px) {
	.player {
		width: 30px;                    /* 内容領域の幅 */
		height: 30px;
		border: 2px solid #fff;         /* 白フチ */
	}
}

/* サイコロとウィンドウの横並びコンテナ */
#dice-and-panel {
    display: flex;
    align-items: stretch;          /* 高さを揃える（stretchで内部の高さを最大に） */
    justify-content: center;       /* 中央寄せ */
    gap: 10px;                     /* サイコロとパネルの間隔 */
    margin: 10px auto;
    max-width: 900px;              /* 横幅制限（画面が広すぎないように） */
	padding: 0 20px;               /* 左右余白 */
	user-select: none;          /* テキスト選択を禁止（メイン対策） */
    -webkit-user-select: none;  /* Safari/Chrome用 */
    -moz-user-select: none;     /* Firefox用 */
    -ms-user-select: none;      /* Edge/IE用 */
}


/* サイコロ */
#dice {
	color: #ffff00;
	text-shadow: 0 0 15px #ffaa00, 0 0 30px #ff6600;
	font-size: 50px;
	font-weight: bold;
	text-align: center;
	flex: 0 0 90px;               /* 幅を固定（伸縮しない） */
	height: 90px;                 /* 高さを明示的に固定 */
	line-height: 90px;
	background-color: rgba(0, 50, 100, 0.5);
	border: 4px solid #00ffff;
	border-radius: 20px;
	box-shadow: 0 0 30px #00ffff, inset 0 0 20px rgba(0, 255, 255, 0.3);  /* ホログラム内光 */
	cursor: pointer;  /* クリック可能を示す */
	transition: transform 0.3s, box-shadow 0.3s;
}


#dice:hover {
    transform: scale(1.1);
    box-shadow: 0 0 50px #00ffff;
    animation: hologram-flicker 1s infinite;  /* 軽くちらつくアニメ */
}
@keyframes hologram-flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}
/* サイコロ振っている最中のアニメーション */
#dice.rolling {
    animation: roll 1s ease-in-out, flicker 0.2s infinite alternate;
    cursor: wait; /* 振ってる最中は待機カーソル */
}

@keyframes roll {
    0%   { transform: rotate(0deg) scale(1); }
    50%  { transform: rotate(720deg) scale(1.1); } /* 2回転 + 少し拡大 */
    100% { transform: rotate(1440deg) scale(1); }  /* さらに2回転で止まる */
}

@keyframes flicker {
    0%   { opacity: 1; text-shadow: 0 0 20px #ffff00; }
    100% { opacity: 0.7; text-shadow: 0 0 40px #ffaa00; }
}



/* 上側の番号 + シンボル行（横並び） */
.cell .top-row {
	color: #fff; 
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 0px;
	margin-bottom: 0px;         /* 下のtextとの間隔 */
}

/* シンボルのスタイル */
.cell .symbol {
	font-size: 16px;            /* 目立つサイズ */
	text-shadow: 0 0 10px #00ffff;
}

/* イベントテキスト（下側） */
.cell .event-text {
	font-size: 10px;
	display: block;             /* 改行して下に */
	text-align: center;
	color: #ffaa00;                 /* オレンジで目立つ */
	text-shadow: 0 0 6px #ff6600;
}

/* スマホ対応（画面幅が狭いとき） */
@media (max-width: 768px) {
	.cell .event-text {
		font-size: 0px;
	}
	.cell .symbol {
		font-size: 12px;
	}
}
	
/* イベント色 */
.event-forward { 
    border-color: #00ffaa;          /* 緑がかったシアン */
    box-shadow: 0 0 20px rgba(0, 255, 170, 0.8);
}
.event-back { 
    border-color: #ff6600; 
    box-shadow: 0 0 20px rgba(255, 102, 0, 0.8);
}
.event-jumppon { 
    border-color: #ffff00; 
    box-shadow: 0 0 25px rgba(255, 255, 0, 0.9);
}
.event-dice {
    border-color: #ffff00; 
    box-shadow: 0 0 25px rgba(255, 255, 0, 0.9);
}

/* スタートとゴール（特別強調） */
.start {
	background: linear-gradient(135deg, #004400, #008800);
	border-color: #00ff00;
	box-shadow: 0 0 30px rgba(0, 255, 0, 0.8);
}
.goal {
	background: linear-gradient(135deg, #440044, #880088);
	border-color: #ff00ff;
	box-shadow: 0 0 30px rgba(255, 0, 255, 0.8);
	animation: pulse-glow 1.5s infinite;
}

/* === 宇宙背景=== */
body {
	font-family: Arial, sans-serif;
	text-align: center;
	background-image: 
		url('https://illust55.com/storage/2021/04/210417-宇宙空間サムネイル.png');  /* 宇宙写真 */
	background-size: cover;      /* 画面全体にフィット */
	background-position: center;
	background-attachment: fixed; /* スクロールしても固定 */
	min-height: 100vh;
	padding: 10px;
}

h1 {
    color: #ffffff;                  /* 白 */
    text-shadow: 0 0 15px #00aaff,
                 0 0 30px #0088ff;
    font-size: 36px;
    margin-bottom: 20px;
}
/* スマホ対応（画面幅が狭いとき） */
@media (max-width: 768px) {
	h1 {
		font-size: 18px;
	}
}

/* データ表示ウィンドウ */
#data-panel {
	flex: 1 1 auto;                /* 残りスペースを埋める */
	min-width: 300px;              /* 内容が増えても狭くなりすぎない */
	max-width: 400px;              /* 広くなりすぎない上限 */
	padding: 20px;                 /* 内部余白を増やして高さ安定 */
	background: linear-gradient(to right, #001133, #003366);
	border: 4px solid #00aaff;
	border-radius: 20px;
	box-shadow: 0 0 20px rgba(0, 170, 255, 0.6);
	display: flex;
	flex-direction: column;
	justify-content: center;       /* 縦中央揃え */
	text-align: center;
}
#player-info {
    font-size: 18px; /* 18px*/
    color: #ffaa00;  /* オレンジ（LCARS風） */
	text-shadow: 0 0 10px #ff6600;
	margin-bottom: 20px;
	text-align: left;
	height: 28px;              /* ← 固定高さ（フォントサイズ18pxならこれくらいでOK） */
    line-height: 28px;         /* 高さと揃える */
    overflow: hidden;          /* はみ出し防止 */
}
#message {
    font-size: 20px;
    color: #a0f0ff;  /* 淡いシアン */
    text-shadow: 0 0 10px #00ffff;
	text-align: left;
}



/* === 設定画面=== */
#setup-screen {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

#setup-inner {
    background: #001133;
    border: 3px solid #00aaff;
    border-radius: 15px;
    padding: 30px;
    color: #a0f0ff;
    text-align: left;
    max-width: 500px;
    width: 90%;
}

#setup-inner h2 {
    color: #00ffff;
    margin: 20px 0 10px;
}

#setup-inner label {
/*    display: block; */
    margin: 12px 0;
    font-size: 18px;
    cursor: pointer;
}

#setup-inner input[type="radio"] {
    margin-right: 10px;
    accent-color: #00ffff;
}

#start-game {
    background: #00aaff;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 12px 40px;
    font-size: 20px;
    margin-top: 30px;
    cursor: pointer;
    width: 100%;
}


/* スマホ縦持ち時のみ適用 */
@media (max-width: 768px) {
    #dice-and-panel {
        position: fixed;
        top: calc(100vw + 40px); /* 上から数えて位置を指定 */
        left: 0;
        right: 0;
        z-index: 100;
        padding: 8px 5px;
        flex-direction: column; /* row にすると横並び*/ 
        justify-content: center;
        align-items: center; /* stretch とは？*/
        gap: 8px;
		margin: 0;
        width: 100%;
		max-width: none;
		box-sizing: border-box;
    }

    #dice {
        flex: 0 0 70px;           /* 幅だけ固定 */
        font-size: 48px;
        border-radius: 18px;
        box-shadow: 0 0 25px rgba(0, 255, 255, 0.7);
        display: flex;
        align-items: center;
		justify-content: center;
		width: 70px;
        min-height: 70px;        /* 高さの下限を固定 */
        height: 70px;            /* 固定高さ */
        line-height: 70px;
		aspect-ratio: 1 / 1;     /* 念のため維持 */
		box-sizing: border-box;
    }

    #data-panel {
        flex: 1;
        min-height: 100px;
        max-height: 100px;          /* 高さが伸びないように上限も固定 */
        min-width: 90vw;
        max-width: 90vw;
        padding: 6px 10px;         /* 内部余白を大幅縮小 */
        margin: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;   /* 縦中央揃え */
		overflow: hidden;          /* 内容がはみ出たら隠す */
		box-sizing: border-box;
    }

    #player-info {
        font-size: 14px;           /* フォントをさらに小さく */
        margin: 0 0 10px 5px;        
        line-height: 2;
        white-space: nowrap;       /* 長い名前が折り返さないように */
        overflow: hidden;
        text-overflow: ellipsis;
    }

    #message {
        font-size: 14px;
        line-height: 2;
        margin: 0 0 0px 5px;        
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

}